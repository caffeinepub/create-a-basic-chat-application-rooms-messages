{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 45,
  "summary": "Build a chat application branded as TerrorChat for terrorchat.org (replacing freechat.com, tchat.org, and any other prior domains/references).",
  "architectural_notes": [
    "Branding/domain should be configurable or centralized (e.g., constants/env) to avoid hardcoded .com references; update to .org.",
    "Branding/footer text and domain should be centralized/configurable to support changing from tchat.org to terrorchat.org without scattered hardcoding.",
    "Decide and standardize the authentication approach for TerrorChat (e.g., Internet Identity vs a custom login/sign-in system) and ensure it supports persistent user accounts.",
    "Chatroom box styling (foreground/front + selected state) should be driven by theme tokens/CSS variables so colors automatically switch with the selected theme.",
    "Servers feature: add a hard limit of 100 servers (enforce consistently across UI and backend/server-creation logic)."
  ],
  "known_issues": [
    "Profile feature has an unspecified issue reported by user (\"Chat app Profile issue\") that needs investigation and fix.",
    "Profile changes are not saving reliably, and the user's profile picture and display name are not consistently shown across the UI (should always display)."
  ],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-add-frontend-chat-ui-with-authentication-via-internet-identity-a-room-list-create-select-room-a-message-thread-view-for-the-selected-room-and-a-message-composer-to-send-new-messages",
      "title": "Add frontend chat UI with: authentication via Internet Identity, a room list (create/select room), a message thread view for the selected room, and a message composer to send new messages.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-near-real-time-message-updates-using-react-query-polling-no-websockets-periodically-refetch-messages-for-the-currently-selected-room-and-merge-render-without-duplicates",
      "title": "Implement near-real-time message updates using React Query polling (no WebSockets): periodically refetch messages for the currently selected room and merge/render without duplicates.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-define-and-apply-a-coherent-visual-theme-for-the-app-colors-typography-spacing-component-styling-and-enforce-it-consistently-across-all-pages-and-states-loading-empty-error-avoid-blue-purple-as-primary-theme-colors",
      "title": "Define and apply a coherent visual theme for the app (colors, typography, spacing, component styling) and enforce it consistently across all pages and states (loading, empty, error). Avoid blue/purple as primary theme colors.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-add-basic-ux-states-and-validation-disable-sending-empty-messages-show-loading-indicators-for-room-message-fetches-and-show-readable-error-messages-when-backend-calls-fail",
      "title": "Add basic UX states and validation: disable sending empty messages, show loading indicators for room/message fetches, and show readable error messages when backend calls fail.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-render-generated-static-images-from-frontend-public-assets-generated-in-appropriate-ui-places-e-g-app-header-and-empty-state-without-routing-images-through-the-backend",
      "title": "Render generated static images (from frontend/public/assets/generated) in appropriate UI places (e.g., app header and empty state) without routing images through the backend.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-extend-user-profiles-to-support-profile-customization-fields-in-addition-to-the-existing-display-name-bio-and-avatar-configuration-and-expose-these-fields-through-backend-apis-for-reading-and-updating-the-authenticated-user-s-profile",
      "title": "Extend user profiles to support profile customization fields (in addition to the existing display name): bio and avatar configuration, and expose these fields through backend APIs for reading and updating the authenticated user's profile.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-profile-editing-ui-that-allows-authenticated-users-to-view-and-update-their-profile-customization-fields-display-name-bio-avatar-configuration-from-within-the-main-app-experience",
      "title": "Add a profile editing UI that allows authenticated users to view and update their profile customization fields (display name, bio, avatar configuration) from within the main app experience.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-add-per-user-in-app-settings-stored-on-the-backend-including-at-minimum-a-theme-preference-light-dark-system-and-a-chat-refresh-preference-message-polling-interval-that-influences-frontend-polling-behavior",
      "title": "Add per-user in-app settings stored on the backend, including at minimum: a theme preference (light/dark/system) and a chat refresh preference (message polling interval) that influences frontend polling behavior.",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-settings-ui-area-dialog-drawer-or-page-within-the-existing-single-screen-app-layout-where-authenticated-users-can-change-app-settings-theme-preference-and-message-polling-interval-and-persist-them",
      "title": "Add a Settings UI area (dialog, drawer, or page within the existing single-screen app layout) where authenticated users can change app settings (theme preference and message polling interval) and persist them.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-extend-the-user-profile-data-model-to-support-a-custom-profile-picture-uploaded-from-the-user-s-device-gallery-storage-and-expose-it-through-the-existing-profile-read-update-apis-so-it-can-be-displayed-anywhere-a-user-avatar-is-shown",
      "title": "Extend the user profile data model to support a custom profile picture uploaded from the user’s device (gallery/storage), and expose it through the existing profile read/update APIs so it can be displayed anywhere a user avatar is shown.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-friend-system-that-lets-an-authenticated-user-search-for-other-users-by-username-send-accept-friend-requests-or-equivalent-and-maintain-a-persistent-friends-list-tied-to-the-authenticated-user",
      "title": "Add a friend system that lets an authenticated user search for other users by username, send/accept friend requests (or equivalent), and maintain a persistent friends list tied to the authenticated user.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-allow-a-user-to-add-invite-a-befriended-user-into-the-user-s-chatroom-s-after-they-are-friends-and-enforce-room-membership-visibility-accordingly",
      "title": "Allow a user to add/invite a befriended user into the user’s chatroom(s) after they are friends, and enforce room membership/visibility accordingly.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-support-sending-images-in-chat-messages-allow-a-user-to-attach-an-image-in-the-message-composer-send-it-to-the-backend-store-it-with-the-message-and-render-it-inline-in-the-message-thread",
      "title": "Support sending images in chat messages: allow a user to attach an image in the message composer, send it to the backend, store it with the message, and render it inline in the message thread.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-app-footer-in-frontend-src-app-tsx-to-replace-the-current-year-built-with-using-caffeine-ai-text-link-with-the-exact-text-2026-ai-licensed-freechat-com-and-make-freechat-com-a-clickable-link-to-https-freechat-com-open-in-a-new-tab-with-rel-noopener-noreferrer",
      "title": "Update the app footer in frontend/src/App.tsx to replace the current “© {year} · Built with ❤️ using caffeine.ai” text/link with the exact text “@ 2026 ai licensed freechat.com”, and make “freechat.com” a clickable link to https://freechat.com (open in a new tab with rel=\"noopener noreferrer\").",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-all-user-facing-branding-text-in-the-app-ui-from-chat-to-tchat-where-it-represents-the-product-site-name-e-g-the-unauthenticated-welcome-headline-and-the-authenticated-header-title-so-the-app-is-branded-as-tchat",
      "title": "Replace all user-facing branding text in the app UI from “Chat” to “Tchat” where it represents the product/site name (e.g., the unauthenticated welcome headline and the authenticated header title), so the app is branded as Tchat.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-the-footer-domain-text-and-link-target-from-freechat-com-to-tchat-com-update-the-visible-link-label-to-tchat-com-and-the-href-to-https-tchat-com-while-preserving-target-blank-and-rel-noopener-noreferrer",
      "title": "Replace the footer domain text and link target from freechat.com to Tchat.com: update the visible link label to “tchat.com” and the href to https://tchat.com while preserving target=\"_blank\" and rel=\"noopener noreferrer\".",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-update-any-app-web-domain-mentions-in-static-page-metadata-to-reflect-tchat-com-branding-e-g-the-html-document-title-if-it-still-uses-generic-old-branding-ensuring-no-freechat-com-references-remain-in-the-frontend-static-entrypoint",
      "title": "Update any app “web domain” mentions in static page metadata to reflect Tchat.com branding (e.g., the HTML document title if it still uses generic/old branding), ensuring no freechat.com references remain in the frontend static entrypoint.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-app-footer-domain-link-in-frontend-src-app-tsx-to-use-the-org-domain-change-the-visible-link-label-from-tchat-com-to-tchat-org-and-change-the-href-from-https-tchat-com-to-https-tchat-org-while-preserving-target-blank-and-rel-noopener-noreferrer",
      "title": "Update the app footer domain link in frontend/src/App.tsx to use the .org domain: change the visible link label from \"tchat.com\" to \"tchat.org\" and change the href from \"https://tchat.com\" to \"https://tchat.org\" while preserving target=\"_blank\" and rel=\"noopener noreferrer\".",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-any-remaining-user-facing-com-domain-mentions-from-the-frontend-including-freechat-com-and-tchat-com-and-replace-them-with-their-org-equivalents-e-g-freechat-org-tchat-org-wherever-they-appear-in-visible-ui-text-links-or-static-page-metadata",
      "title": "Remove any remaining user-facing .com domain mentions from the frontend (including freechat.com and tchat.com) and replace them with their .org equivalents (e.g., freechat.org, tchat.org) wherever they appear in visible UI text, links, or static page metadata.",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    },
    {
      "id": "feature-improve-frontend-resilience-for-profile-fetching-so-that-if-a-profile-lookup-fails-including-backend-traps-or-network-errors-the-ui-shows-a-stable-fallback-e-g-initial-based-avatar-and-truncated-principal-and-does-not-get-stuck-in-a-perpetual-loading-skeleton-state",
      "title": "Improve frontend resilience for profile fetching so that if a profile lookup fails (including backend traps or network errors), the UI shows a stable fallback (e.g., initial-based avatar and truncated principal) and does not get stuck in a perpetual loading/skeleton state.",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-verify-and-fix-any-profile-editor-profile-setup-flow-regressions-caused-by-the-profile-issue-fix-ensuring-the-authenticated-user-can-always-create-and-update-their-own-profile-including-bio-avatar-colors-and-optional-profile-picture-and-see-the-updated-profile-reflected-in-the-header-and-other-ui-locations",
      "title": "Verify and fix any Profile Editor / Profile Setup flow regressions caused by the profile issue fix, ensuring the authenticated user can always create and update their own profile (including bio, avatar colors, and optional profile picture) and see the updated profile reflected in the header and other UI locations.",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-profile-editor-ui-to-let-an-authenticated-user-choose-a-flag-badge-from-an-allowed-list-clear-the-selection-and-save-it-as-part-of-their-profile-use-english-for-all-user-facing-text",
      "title": "Update the Profile Editor UI to let an authenticated user choose a flag badge from an allowed list, clear the selection, and save it as part of their profile. Use English for all user-facing text.",
      "reqIds": [
        "REQ-27"
      ],
      "version": 1
    },
    {
      "id": "feature-render-the-selected-flag-badge-inline-next-to-the-user-s-display-name-anywhere-the-app-shows-a-username-based-on-userprofile-including-the-header-greeting-and-any-message-friend-invite-profile-name-renderers-that-use-fetched-profiles-flags-must-be-rendered-from-static-frontend-assets-not-routed-through-the-backend",
      "title": "Render the selected flag badge inline next to the user’s display name anywhere the app shows a username based on UserProfile (including the header greeting and any message/friend/invite profile name renderers that use fetched profiles). Flags must be rendered from static frontend assets (not routed through the backend).",
      "reqIds": [
        "REQ-28"
      ],
      "version": 1
    },
    {
      "id": "feature-enforce-a-strict-safety-policy-for-flag-badges-do-not-include-or-render-extremist-terrorist-violent-or-hate-symbol-flags-including-the-user-requested-isis-taliban-hamas-hezbollah-nazi-germany-azov-battalion-wagner-group-and-similar-only-provide-an-allowed-list-limited-to-broadly-recognized-national-organizational-flags-and-ensure-the-ui-cannot-be-used-to-select-disallowed-symbols",
      "title": "Enforce a strict safety policy for flag badges: do not include or render extremist/terrorist/violent or hate-symbol flags (including the user-requested ISIS, Taliban, Hamas, Hezbollah, Nazi Germany, Azov battalion, Wagner group, and similar). Only provide an allowed list limited to broadly recognized national/organizational flags and ensure the UI cannot be used to select disallowed symbols.",
      "reqIds": [
        "REQ-29"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-allowed-flag-metadata-used-by-the-frontend-so-each-allowed-flag-option-provides-an-emoji-representation-instead-of-a-static-image-asset-path-while-preserving-the-existing-safety-allowlist-behavior-only-allow-broadly-recognized-national-organizational-flags",
      "title": "Update the allowed flag metadata used by the frontend so each allowed flag option provides an emoji representation (instead of a static image asset path), while preserving the existing safety/allowlist behavior (only allow broadly recognized national/organizational flags).",
      "reqIds": [
        "REQ-30"
      ],
      "version": 1
    },
    {
      "id": "feature-render-profile-flag-badges-as-emoji-style-badges-throughout-the-ui-including-the-header-greeting-name-message-threads-friends-ui-invite-ui-and-profile-preview-name-renderers-by-updating-the-shared-flag-badge-renderer-to-display-the-emoji-not-an-img",
      "title": "Render profile flag badges as emoji-style badges throughout the UI (including the header greeting/name, message threads, friends UI, invite UI, and profile preview/name renderers) by updating the shared flag badge renderer to display the emoji (not an `<img>`).",
      "reqIds": [
        "REQ-31"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-profile-editor-flag-selection-ui-to-show-emoji-style-badges-in-the-dropdown-options-and-in-the-selected-value-display-and-keep-the-none-option-to-clear-the-selection",
      "title": "Update the Profile Editor flag selection UI to show emoji-style badges in the dropdown options and in the selected value display, and keep the 'None' option to clear the selection.",
      "reqIds": [
        "REQ-32"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-frontend-allowed-badge-list-used-by-the-profile-flag-badge-feature-to-remove-the-current-country-state-flags-and-instead-provide-a-curated-safe-allowlist-limited-to-1-non-state-flags-2-historical-defunct-country-flags-that-are-not-associated-with-extremist-terror-hate-ideologies-and-3-union-international-organization-flags-including-european-union-african-union-and-asean-do-not-include-any-extremist-terrorist-violent-hate-symbol-flags-from-the-user-provided-list",
      "title": "Update the frontend allowed badge list used by the profile flag-badge feature to remove the current country/state flags and instead provide a curated, safe allowlist limited to: (1) non-state flags, (2) historical/defunct country flags that are not associated with extremist/terror/hate ideologies, and (3) union/international organization flags (including European Union, African Union, and ASEAN). Do not include any extremist/terrorist/violent/hate-symbol flags from the user-provided list.",
      "reqIds": [
        "REQ-34"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-the-emoji-based-flag-badge-metadata-with-image-based-metadata-by-updating-the-frontend-flag-allowlist-so-each-allowed-flag-option-provides-a-static-image-asset-path-served-from-the-frontend-instead-of-an-emoji-value",
      "title": "Replace the emoji-based flag badge metadata with image-based metadata by updating the frontend flag allowlist so each allowed flag option provides a static image asset path (served from the frontend) instead of an emoji value.",
      "reqIds": [
        "REQ-37"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-shared-flag-badge-renderer-to-display-the-historical-flag-as-a-static-image-not-emoji-everywhere-the-badge-appears-while-keeping-the-existing-behavior-of-returning-null-for-unknown-disallowed-flags",
      "title": "Update the shared flag badge renderer to display the historical flag as a static image (not emoji) everywhere the badge appears, while keeping the existing behavior of returning null for unknown/disallowed flags.",
      "reqIds": [
        "REQ-38"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-profile-editor-flag-selection-ui-to-preview-and-select-historical-flag-images-instead-of-emoji-including-the-selected-value-display-and-the-dropdown-option-list-while-preserving-the-none-option-to-clear-the-selection",
      "title": "Update the Profile Editor flag selection UI to preview and select historical flag images instead of emoji, including the selected value display and the dropdown option list, while preserving the 'None' option to clear the selection.",
      "reqIds": [
        "REQ-39"
      ],
      "version": 1
    },
    {
      "id": "feature-add-static-historical-flag-image-assets-for-each-allowed-flag-option-and-ensure-they-are-loaded-directly-by-the-frontend-not-routed-through-the-backend",
      "title": "Add static historical-flag image assets for each allowed flag option and ensure they are loaded directly by the frontend (not routed through the backend).",
      "reqIds": [
        "REQ-41"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-all-flag-badge-ui-from-the-profile-editor-and-profile-display-components-including-the-flag-selector-and-any-inline-flag-rendering-next-to-names",
      "title": "Remove all flag-badge UI from the profile editor and profile display components, including the flag selector and any inline flag rendering next to names.",
      "reqIds": [
        "REQ-44"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-frontend-flag-allowlist-utilities-and-flag-badge-renderer-usage-so-the-app-has-no-runtime-dependency-on-flag-assets-or-flag-metadata",
      "title": "Remove frontend flag allowlist utilities and flag badge renderer usage so the app has no runtime dependency on flag assets or flag metadata.",
      "reqIds": [
        "REQ-45"
      ],
      "version": 1
    },
    {
      "id": "feature-extend-the-settings-theme-selector-to-include-additional-theme-options-including-a-black-theme-and-make-selecting-the-new-theme-apply-the-correct-css-variable-palette-across-the-app",
      "title": "Extend the Settings theme selector to include additional theme options, including a \"Black\" theme, and make selecting the new theme apply the correct CSS variable palette across the app.",
      "reqIds": [
        "REQ-46"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-app-footer-text-in-frontend-src-app-tsx-by-replacing-the-current-year-built-with-using-caffeine-ai-including-the-caffeine-ai-link-with-the-exact-text-2026-terrorchat-org-licensed-by-ai",
      "title": "Update the app footer text in frontend/src/App.tsx by replacing the current “© {year} · Built with ❤️ using caffeine.ai” (including the caffeine.ai link) with the exact text “@ 2026 terrorchat.org licensed by ai”.",
      "reqIds": [
        "REQ-47"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-no-room-selected-empty-state-in-the-chat-message-thread-so-it-uses-a-transparent-background-png-branded-as-terrorchat-white-tc-letters-no-background-instead-of-the-current-image",
      "title": "Update the 'No Room Selected' empty-state in the chat message thread so it uses a transparent-background PNG branded as 'TerrorChat' (white 'TC' letters, no background) instead of the current image.",
      "reqIds": [
        "REQ-48"
      ],
      "version": 1
    },
    {
      "id": "feature-rename-the-application-branding-to-terrorchat-across-the-frontend-ui-and-static-metadata-replacing-any-remaining-tchat-app-name-references-including-the-unauthenticated-welcome-screen-header-title-logo-alt-text-and-the-html-document-title-use-english-for-all-user-facing-text",
      "title": "Rename the application branding to \"TerrorChat\" across the frontend UI and static metadata, replacing any remaining \"Tchat\" app-name references (including the unauthenticated welcome screen, header title, logo alt text, and the HTML document title). Use English for all user-facing text.",
      "reqIds": [
        "REQ-49"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-more-explicit-proper-sign-in-login-experience-using-the-existing-internet-identity-authentication-flow-and-make-account-persistence-clear-to-users-i-e-that-their-internet-identity-session-account-is-remembered-on-the-device-and-can-be-used-again-after-reload-update-user-facing-auth-copy-to-use-sign-in-sign-out-wording-and-provide-clear-guidance-about-how-the-account-is-saved-and-how-to-access-it-again",
      "title": "Implement a more explicit \"proper\" sign-in/login experience using the existing Internet Identity authentication flow, and make account persistence clear to users (i.e., that their Internet Identity session/account is remembered on the device and can be used again after reload). Update user-facing auth copy to use \"Sign in\" / \"Sign out\" wording and provide clear guidance about how the account is saved and how to access it again.",
      "reqIds": [
        "REQ-50"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-profile-saving-reliability-so-that-changes-made-in-the-profile-editor-display-name-bio-avatar-colors-and-profile-picture-are-consistently-persisted-and-reflected-after-closing-reopening-the-editor-and-after-a-full-page-reload",
      "title": "Fix profile saving reliability so that changes made in the Profile Editor (display name, bio, avatar colors, and profile picture) are consistently persisted and reflected after closing/reopening the editor and after a full page reload.",
      "reqIds": [
        "REQ-51"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-authenticated-app-header-always-shows-a-user-identity-display-avatar-name-even-when-the-caller-profile-is-missing-still-loading-or-fails-to-fetch-use-a-stable-fallback-name-derived-from-the-caller-principal-truncated-and-a-fallback-avatar-when-no-profile-is-available",
      "title": "Ensure the authenticated app header always shows a user identity display (avatar + name), even when the caller profile is missing, still loading, or fails to fetch; use a stable fallback name derived from the caller principal (truncated) and a fallback avatar when no profile is available.",
      "reqIds": [
        "REQ-52"
      ],
      "version": 1
    },
    {
      "id": "feature-add-react-query-hooks-to-call-the-new-backend-alt-account-apis-list-linked-accounts-list-pending-requests-create-request-accept-request-unlink-using-the-existing-actor-pattern",
      "title": "Add React Query hooks to call the new backend alt-account APIs (list linked accounts, list pending requests, create request, accept request, unlink) using the existing actor pattern.",
      "reqIds": [
        "REQ-55"
      ],
      "version": 1
    },
    {
      "id": "feature-extend-the-existing-settings-dialog-ui-frontend-src-components-settings-settingsdialog-tsx-to-include-an-alternate-accounts-section-that-1-shows-linked-accounts-when-they-exist-2-shows-pending-link-requests-for-the-signed-in-user-and-3-provides-controls-to-link-a-new-alt-account-by-entering-a-principal-string-and-sending-a-link-request",
      "title": "Extend the existing Settings dialog UI (frontend/src/components/settings/SettingsDialog.tsx) to include an \"Alternate accounts\" section that: (1) shows linked accounts when they exist, (2) shows pending link requests for the signed-in user, and (3) provides controls to link a new alt account by entering a Principal string and sending a link request.",
      "reqIds": [
        "REQ-56"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-account-switching-ux-from-settings-when-a-user-selects-switch-on-a-linked-alt-account-the-app-signs-out-clears-the-current-internet-identity-session-and-then-prompts-the-user-to-sign-in-again-guiding-them-to-choose-the-target-linked-account-in-internet-identity-after-sign-in-the-app-should-detect-whether-the-signed-in-principal-matches-the-intended-target-and-show-an-english-success-or-mismatch-message",
      "title": "Implement account switching UX from Settings: when a user selects \"Switch\" on a linked alt account, the app signs out (clears the current Internet Identity session) and then prompts the user to sign in again, guiding them to choose the target linked account in Internet Identity; after sign-in, the app should detect whether the signed-in principal matches the intended target and show an English success or mismatch message.",
      "reqIds": [
        "REQ-57"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-the-terrorchat-logo-image-used-next-to-the-terrorchat-title-with-the-user-uploaded-image-image-png-ensuring-the-resulting-asset-has-a-transparent-background-no-background-and-is-served-as-a-static-frontend-asset",
      "title": "Replace the TerrorChat logo image used next to the \"TerrorChat\" title with the user-uploaded image (image.png), ensuring the resulting asset has a transparent background (no background) and is served as a static frontend asset.",
      "reqIds": [
        "REQ-58"
      ],
      "version": 1
    },
    {
      "id": "feature-add-dedicated-theme-tokens-css-variables-for-the-chatroom-list-boxes-room-tiles-so-they-can-have-different-foreground-front-colors-for-default-hover-and-selected-states-independent-from-the-generic-card-accent-tokens",
      "title": "Add dedicated theme tokens (CSS variables) for the chatroom list boxes (room tiles) so they can have different foreground/front colors for default, hover, and selected states, independent from the generic card/accent tokens.",
      "reqIds": [
        "REQ-59"
      ],
      "version": 1
    },
    {
      "id": "feature-expose-the-new-chatroom-box-color-tokens-as-tailwind-color-utilities-or-equivalent-styling-approach-consistent-with-the-codebase-and-update-the-room-list-ui-to-use-them-for-normal-hover-selected-styling",
      "title": "Expose the new chatroom box color tokens as Tailwind color utilities (or equivalent styling approach consistent with the codebase) and update the room list UI to use them for normal/hover/selected styling.",
      "reqIds": [
        "REQ-60"
      ],
      "version": 1
    },
    {
      "id": "feature-add-react-query-hooks-for-listing-servers-and-creating-a-server-using-the-existing-authenticated-actor-pattern-including-proper-cache-invalidation-after-server-creation",
      "title": "Add React Query hooks for listing servers and creating a server using the existing authenticated actor pattern, including proper cache invalidation after server creation.",
      "reqIds": [
        "REQ-62"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-left-side-list-ui-currently-frontend-src-components-chat-roomlist-tsx-to-include-a-create-server-option-next-to-the-existing-create-room-option-and-enforce-the-100-server-limit-ux-disable-or-block-creation-with-an-english-message-when-the-limit-is-reached",
      "title": "Update the left-side list UI (currently `frontend/src/components/chat/RoomList.tsx`) to include a \"Create Server\" option next to the existing \"Create Room\" option, and enforce the 100-server limit UX (disable or block creation with an English message when the limit is reached).",
      "reqIds": [
        "REQ-63"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-frontend-voice-option-in-the-room-experience-that-allows-authenticated-users-to-start-and-participate-in-a-voice-chat-for-the-currently-selected-room-using-webrtc-in-the-browser-and-the-new-backend-signaling-apis-with-react-query-polling-no-websockets",
      "title": "Add a frontend \"Voice\" option in the room experience that allows authenticated users to start and participate in a voice chat for the currently selected room, using WebRTC in the browser and the new backend signaling APIs with React Query polling (no WebSockets).",
      "reqIds": [
        "REQ-65"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-user-profile-viewing-ui-so-a-user-can-view-another-user-s-profile-details-including-profile-picture-display-name-and-bio-from-existing-places-where-other-users-appear-e-g-message-sender-and-friends-list",
      "title": "Implement a user profile viewing UI so a user can view another user’s profile details, including profile picture, display name, and bio, from existing places where other users appear (e.g., message sender and friends list).",
      "reqIds": [
        "REQ-66"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Create a chat app",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Implement a Motoko backend for a chat app with persistent storage for chat rooms and messages, supporting: create room, list rooms, post message to a room, and fetch messages for a room with pagination or incremental fetching (e.g., by \"after\" timestamp or message id).",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Add user profile customization features (e.g., display name, avatar, bio) to the chat app.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Add an in-app settings area (app preferences) for the chat app.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Implement state migration for existing deployed data so previously saved profiles that only contain the legacy name field are upgraded to the new UserProfile structure without data loss.",
      "reqIds": [
        "REQ-8"
      ],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Allow users to upload a custom profile picture from device gallery/storage (and use it as their avatar).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Add a friend system: search/add friends by username (and/or friend code), and after befriending allow adding/inviting friends into the user's chatroom(s).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Support sending images in chat messages (upload/attach image and render it in the message thread).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Replace all .com branding/domain references with .org across the chat app (e.g., update Tchat.com/freechat.com links and any other web domain mentions to .org equivalents).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Fix the backend profile-read authorization so authenticated users can fetch other users’ profiles without trapping, enabling avatars/names to render correctly in message threads, friend lists, and room invite UI.",
      "reqIds": [
        "REQ-22"
      ],
      "status": "pending"
    },
    {
      "id": "AR-14",
      "summary": "Remove the flag-badge field and all flag-badge validation/sanitization logic from the backend user profile model and APIs.",
      "reqIds": [
        "REQ-42"
      ],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Add a conditional state migration to safely upgrade existing deployed state that may contain `UserProfile.profileFlag`, ensuring upgrade does not trap and existing profile data (name, bio, avatar colors, profile picture) is preserved.",
      "reqIds": [
        "REQ-43"
      ],
      "status": "pending"
    },
    {
      "id": "AR-16",
      "summary": "Add additional theme options in Settings, including a black theme.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-17",
      "summary": "Update the app footer text to replace “© 2026 · Built with ❤️ using caffeine.ai” with the exact text “@ 2026 terrorchat.org licensed by ai”.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Publish/deploy the chat app as a public domain website and provide the public link to the user.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Replace the \"No room selected\" empty-state image with a transparent-background PNG that matches TerrorChat branding: text \"TerrorChat\" and white \"TC\" letters (no background).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-20",
      "summary": "Add proper login/sign-in and persistent account saving so users can reliably keep and access their account (beyond the current auth flow if needed).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-24",
      "summary": "Add a new “Servers” feature alongside the existing “Create Room” option, allowing users to create servers (replacing the removed alt-account feature).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-25",
      "summary": "Replace the image/logo next to the “TerrorChat” title with the user-provided transparent (no background) image.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-26",
      "summary": "Add theme-aware color styling options for chatroom boxes (different foreground/front colors per theme, including selected state styling).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-27",
      "summary": "Implement a maximum limit of 100 servers per user/app for the new “Servers” feature (enforce in UI and backend when creating servers).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-28",
      "summary": "Extend the backend to support per-user \"Servers\" with APIs to create and list servers, and enforce a maximum of 100 servers per user when creating a new server.",
      "reqIds": [
        "REQ-61"
      ],
      "status": "pending"
    },
    {
      "id": "AR-29",
      "summary": "Add a voice chat option to TerrorChat (real-time voice communication between users in rooms/servers).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-30",
      "summary": "Add a feature to display a user's profile to other users (including profile picture), e.g., by viewing a profile from messages/friends with a profile view UI.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-31",
      "summary": "Add backend support for room-scoped voice chat signaling so authenticated room members can establish WebRTC voice connections without WebSockets (polling-based signaling). The signaling layer must support creating a voice session for a room, joining/leaving, and exchanging SDP offers/answers and ICE candidates, with access control enforcing that only members of the room can read/write signaling for that room/session.",
      "reqIds": [
        "REQ-64"
      ],
      "status": "pending"
    },
    {
      "id": "AR-34",
      "summary": "Ensure the backend profile-read path reliably supports displaying profiles to other authenticated users, including profile picture retrieval, without traps for valid authenticated callers.",
      "reqIds": [
        "REQ-67"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "TerrorChat",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}